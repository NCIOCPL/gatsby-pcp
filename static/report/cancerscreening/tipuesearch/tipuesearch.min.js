function getUrlParam(e){var t=new RegExp(e+"=([^&]*)","i").exec(window.location.search);return t&&unescape(t[1])||""}!function($){$.fn.tipuesearch=function(options){var set=$.extend({show:7,newWindow:!1,showURL:!0,showTitleCount:!0,minimumLength:3,descriptiveWords:25,highlightTerms:!0,highlightEveryTerm:!1,mode:"static",liveDescription:"*",liveContent:"*",contentLocation:"tipuesearch/tipuesearch_content.json",queryParamName:"q",resultsDivID:"#tipue_search_content",maxindex:3,listtype:"normal",wholewordsonly:!0,allterms:!1,showDuration:!1,debug:!1},options);return set.input=this[0].id,this.each(function(){function getURLP(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function getTipueSearch(start,replace){$(set.resultsDivID).hide(),$(set.resultsDivID).html('<div class="tipue_search_spinner"><div class="tipue_search_rect1"></div><div class="tipue_search_rect2"></div><div class="rect3"></div></div>'),$(set.resultsDivID).show();var out="",results="",show_replace=!1,show_stop=!1,c=0;found=[];var d=$("#"+set.input).val().toLowerCase(),re=/[^\s"]+|"([^"]*)"/gi;d_w=[];do{var match=re.exec(d);null!=match&&d_w.push(match[1]?$.trim(match[1]):$.trim(match[0]))}while(null!=match);d="";for(var i=d_w.length-1;i>=0;i--){for(var a_w=!0,f=0;f<tipuesearch_stop_words.length;f++)d_w[i]=$.trim(d_w[i]),d_w[i]==tipuesearch_stop_words[f]&&(a_w=!1,show_stop=!0);a_w?d=d+" "+d_w[i]:d_w[i].remove}if(d.length>=set.minimumLength){if(replace)for(var d_r=d,i=0;i<d_w.length;i++)for(var f=0;f<tipuesearch_replace.words.length;f++)d_w[i]==tipuesearch_replace.words[f].word&&(d_w[i]=d_w[i].replace(d_w[i],tipuesearch_replace.words[f].replace_with),show_replace=!0);for(var i=0;i<d_w.length;i++)for(var f=0;f<tipuesearch_stem.words.length;f++)d_w[i]==tipuesearch_stem.words[f].word&&(d_w[i]=d_w[i]+" "+tipuesearch_stem.words[f].stem);for(var i=0;i<tipuesearch_in.pages.length;i++){var score=0,s_t=tipuesearch_in.pages[i].text;allfound=!0;for(var f=0;f<d_w.length;f++){thisscore=0;var term=RegExp.escape(d_w[f]),regex_pre="(?:^|\\s|'|\\\"|\\(|\\)|\\[|\\]|\\{|\\<|#|\\^|\\$|_|-|\\.|\\,|\\+|`|\\||\\@|\\$|\\%|“|\\¿|\\¡)",regex_post="(?:$|\\s|'|\\\"|\\(|\\)|\\[|\\]|\\{|\\<|#|\\^|\\$|_|-|\\.|\\,|\\+|`|\\||\\@|\\$|\\%|”|\\?|\\!)";set.wholewordsonly&&("\\*"==term.substring(0,2)&&(regex_pre=""),"\\*"==term.substring(term.length-2)&&(regex_post=""));var pat=new RegExp(regex_pre+term.replace(/\\\*/g,"").replace(/\\\?/g,".")+regex_post,"gi");if(-1!=tipuesearch_in.pages[i].title.search(pat)){var m_c=tipuesearch_in.pages[i].title.match(pat).length;thisscore+=20*m_c}if(-1!=tipuesearch_in.pages[i].text.search(pat)){var m_c=tipuesearch_in.pages[i].text.match(pat).length;thisscore+=20*m_c}if(-1!=tipuesearch_in.pages[i].tags.search(pat)){var m_c=tipuesearch_in.pages[i].tags.match(pat).length;thisscore+=10*m_c}if(-1!=tipuesearch_in.pages[i].url.search(pat)&&(thisscore+=20),0!=thisscore)for(var e=0;e<tipuesearch_weight.weight.length;e++)tipuesearch_in.pages[i].url==tipuesearch_weight.weight[e].url&&(thisscore+=tipuesearch_weight.weight[e].score);if(thisscore&&term.match("^-")&&(pat=new RegExp(term.substring(1),"i"),(-1!=tipuesearch_in.pages[i].title.search(pat)||-1!=tipuesearch_in.pages[i].text.search(pat)||-1!=tipuesearch_in.pages[i].tags.search(pat))&&(thisscore=0)),thisscore&&set.highlightTerms){if(set.highlightEveryTerm)var patr=new RegExp("("+regex_pre+term.replace(/\\\*/g,"").replace(/\\\?/g,".")+regex_post+")","gi");else var patr=new RegExp("("+regex_pre+term.replace(/\*/g,"").replace(/\\\?/g,".")+regex_post+")","i");s_t=s_t.replace(/&amp;/gi,"&"),s_t=s_t.replace(/&nbsp;/gi,"\b"),s_t=s_t.replace(patr,'<span class="h01">$1</span>'),s_t=s_t.replace(eval("//g"),""),s_t=s_t.replace(eval("/\b/g"),"&nbsp;"),tipuesearch_in.pages[i].title=tipuesearch_in.pages[i].title.replace(/&amp;/gi,"&"),tipuesearch_in.pages[i].title=tipuesearch_in.pages[i].title.replace(/&nbsp;/gi,"\b"),tipuesearch_in.pages[i].title=tipuesearch_in.pages[i].title.replace(patr,'<span class="h01">$1</span>'),tipuesearch_in.pages[i].title=tipuesearch_in.pages[i].title.replace(eval("//g"),""),tipuesearch_in.pages[i].title=tipuesearch_in.pages[i].title.replace(eval("/\b/g"),"&nbsp;")}if(set.allterms&&0==thisscore&&allfound){score=0;break}score+=thisscore}0!=score&&(found.push({score:score,title:tipuesearch_in.pages[i].title,desc:s_t,url:tipuesearch_in.pages[i].url}),c++)}if(0!=c){if(set.showTitleCount&&0==tipuesearch_t_c){var title=document.title;document.title="("+c+") "+title,tipuesearch_t_c++}if(1==show_replace&&(out+='<div id="tipue_search_warning">'+tipuesearch_string_2+" "+d+". "+tipuesearch_string_3+' <a id="tipue_search_replaced">'+d_r+"</a></div>"),1==c)out+='<div id="tipue_search_results_count">'+tipuesearch_string_4+"</div>";else{c_c=c.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");var totalpages=Math.ceil(c/set.show);out+='<div id="tipue_search_results_count">'+c_c+" "+tipuesearch_string_5+" - "+totalpages+" "+tipuesearch_string_16+"</div>"}found.sort(function(e,t){return t.score-e.score});for(var l_o=0,i=0;i<found.length;i++){if(l_o>=start&&l_o<set.show+start){if(listnum="numeric"==set.listtype?"<strong>"+(l_o+1)+".</strong>&nbsp;":"",out+='<div class="tipue_search_content_title"><a href="'+found[i].url+location.search+'"'+tipue_search_w+">"+listnum+found[i].title+"</a></div>",set.debug&&(out+='<div class="tipue_search_content_debug">'+tipuesearch_string_17+" "+found[i].score+"</div>"),set.showURL){var s_u=found[i].url.toLowerCase();0==s_u.indexOf("http://")&&(s_u=s_u.slice(7)),out+='<div class="tipue_search_content_url"><a href="'+found[i].url+location.search+'"'+tipue_search_w+">"+s_u+"</a></div>"}if(found[i].desc){var t=found[i].desc;firstterm=t.indexOf('<span class="h01"'),firstterm>30&&(t="..."+t.substring(firstterm-30));var t_d="",t_w=t.split(" ");if(t_w.length<set.descriptiveWords)t_d=t;else for(var f=0;f<set.descriptiveWords;f++)t_d+=t_w[f]+" ";t_d=$.trim(t_d),"."!=t_d.charAt(t_d.length-1)&&(t_d+=" ..."),out+='<div class="tipue_search_content_text">'+t_d+"</div>"}}l_o++}if(c>set.show){var pages=Math.ceil(c/set.show);if(pages>1){var page=start/set.show;out+='<div id="tipue_search_foot"><ul id="tipue_search_foot_boxes">',start>0&&(out+='<li><a href="#" class="tipue_search_foot_box" id="0_'+replace+'">'+tipuesearch_string_14+"</a></li>",out+='<li><a href="#" class="tipue_search_foot_box" id="'+(start-set.show)+"_"+replace+'">'+tipuesearch_string_6+"</a></li>"),lowerLimit=page-Math.floor(set.maxindex/2),upperLimit=page+Math.floor(set.maxindex/2),lowerLimit<0&&(upperLimit-=lowerLimit,lowerLimit=0),upperLimit>pages&&(lowerLimit-=upperLimit-pages,upperLimit=pages),lowerLimit<0&&(lowerLimit=0);for(var i=lowerLimit;i<upperLimit;i++)out+=i==page?'<li class="current">'+(i+1)+"</li> ":'<li><a href="#" class="tipue_search_foot_box" id="'+i*set.show+"_"+replace+'">'+(i+1)+"</a></li>";page+1!=pages&&(out+='<li><a href="#" class="tipue_search_foot_box" id="'+(start+set.show)+"_"+replace+'">'+tipuesearch_string_7+"</a></li>",out+='<li><a href="#" class="tipue_search_foot_box" id="'+Math.floor((pages-1)*set.show)+'">'+tipuesearch_string_15+"</a></li>"),out+="</ul></div>"}}}else out+='<div id="tipue_search_warning">'+tipuesearch_string_8+"</div>"}else show_stop?out+='<div id="tipue_search_warning">'+tipuesearch_string_8+". "+tipuesearch_string_9+"</div>":(out+='<div id="tipue_search_warning">'+tipuesearch_string_10+"</div>",out+=1==set.minimumLength?'<div id="tipue_search_warning">'+tipuesearch_string_11+"</div>":'<div id="tipue_search_warning">'+tipuesearch_string_12+" "+set.minimumLength+" "+tipuesearch_string_13+"</div>");if(set.showDuration){var endTime=(new Date).getTime(),duration=(endTime-startTime)/1e3;out+='<p class="tipue_search_duration">'+tipuesearch_string_18.replace("$1",+duration.toFixed(3))+"</p>"}$(set.resultsDivID).hide(),$(set.resultsDivID).html(out),$(set.resultsDivID).slideDown(200),$("#tipue_search_replaced").click(function(){getTipueSearch(0,!1)}),$(".tipue_search_foot_box").click(function(){var e=$(this).attr("id"),t=e.split("_");getTipueSearch(parseInt(t[0]),t[1])})}var tipuesearch_in={pages:[]};$.ajaxSetup({async:!1});var tipuesearch_t_c=0;if("live"==set.mode)for(var i=0;i<tipuesearch_pages.length;i++)$.get(tipuesearch_pages[i]).done(function(e){var t=$(set.liveContent,e).text();t=t.replace(/\s+/g," ");var s=$(set.liveDescription,e).text();s=s.replace(/\s+/g," ");var r=e.toLowerCase().indexOf("<title>"),a=e.toLowerCase().indexOf("</title>",r+7);if(-1!=r&&-1!=a)var p=e.slice(r+7,a);else var p=tipuesearch_string_1;tipuesearch_in.pages.push({title:p,text:s,tags:t,url:tipuesearch_pages[i]})});"json"==set.mode&&$.getJSON(set.contentLocation).done(function(e){tipuesearch_in=$.extend({},e)}),"static"==set.mode&&(tipuesearch_in=$.extend({},tipuesearch));var tipue_search_w="";set.newWindow&&(tipue_search_w=' target="_blank"'),getURLP(set.queryParamName)&&($("#"+set.input).val(getURLP(set.queryParamName)),getTipueSearch(0,!0)),$(this).keyup(function(e){"13"==e.keyCode&&getTipueSearch(0,!0)})})}}(jQuery),RegExp.escape||(RegExp.escape=function(e){return String(e).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")});var tipue_per_page=getUrlParam("per_page");""!=tipue_per_page&&(tipue_per_page=parseInt(tipue_per_page),$("#tipue_per_page").val(tipue_per_page));var tipue_match_type=1==getUrlParam("matchtype");tipue_match_type?$("#all").prop("checked",!0):$("#any").prop("checked",!0),$(document).ready(function(){function e(e){$(".tipue_search_pop").slideFadeToggle(function(){e.removeClass("selected")})}$("#help").on("click",function(){return $(this).hasClass("selected")?e($(this)):($(this).addClass("selected"),$(".tipue_search_pop").slideFadeToggle()),!1}),$(".close").on("click",function(){return e($("#help")),!1}),$.fn.slideFadeToggle=function(e,t){return this.animate({opacity:"toggle",height:"toggle"},"fast",e,t)}});